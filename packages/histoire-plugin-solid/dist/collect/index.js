import{createComponent as u,render as v}from"solid-js/web";import{createContext as d,useContext as s}from"solid-js";import*as e from"virtual:$histoire-generated-global-setup";import*as r from"virtual:$histoire-setup";const f=d(),m=d(),C=t=>{const n=s(f);if(!n)return null;const i={id:t.id??n.fileData.id,title:t.title??n.fileData.fileName,group:t.group,layout:t.layout,icon:t.icon,iconColor:t.iconColor,docsOnly:t.docsOnly,variants:[]};n.addStory(i);const a={story:i,addVariant:l=>{i.variants.push(l)}};return u(m.Provider,{value:a,get children(){return t.children}})},h=t=>{const n=s(m);if(!n)return null;const i={id:t.id??`${n.story.id}-${n.story.variants.length}`,title:t.title??"untitled",icon:t.icon,iconColor:t.iconColor,source:t.source};return n.addVariant(i),null};async function g({file:t,el:n,storyData:i}){var c;const{default:a}=await import(/* @vite-ignore */t.moduleId),l={addStory:o=>{i.push(o)},fileData:t},y=v(()=>u(f.Provider,{value:l,get children(){return u(a,{Hst:{Story:C,Variant:h}})}}),n);if(await new Promise(o=>setTimeout(o,0)),typeof(e==null?void 0:e.setupSolid)=="function"){const o=e.setupSolid;await o({story:null,variant:null})}if(typeof(r==null?void 0:r.setupSolid)=="function"){const o=r.setupSolid;await o({story:null,variant:null})}i.length>0&&((c=i[0])==null?void 0:c.variants.length)===0&&i[0].variants.push({id:"_default",title:"default"}),y()}export{C as Story,h as Variant,g as run};
